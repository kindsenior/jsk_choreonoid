message("This is qpOASES")

option(TRUST_QPOASES_SERVER_CERT "trust certification of https://projects.coin-or.org/svn/qpOASES/stable/3.0" ON)
if (${TRUST_QPOASES_SERVER_CERT})
  set(TRUST_SERVER_CERT --trust-server-cert)
endif()
if (NOT EXISTS ${CMAKE_CURRENT_BINARY_DIR}/qpOASES-3.0)
  execute_process(COMMAND svn co ${TRUST_SERVER_CERT} --non-interactive https://projects.coin-or.org/svn/qpOASES/stable/3.0 ${CMAKE_CURRENT_BINARY_DIR}/qpOASES-3.0)
  execute_process(COMMAND sed -i -e "s/qpOASES\ STATIC/qpOASES\ SHARED/g" ${CMAKE_CURRENT_BINARY_DIR}/qpOASES-3.0/CMakeLists.txt)
  execute_process(COMMAND cmake -E chdir ${CMAKE_CURRENT_BINARY_DIR}/qpOASES-3.0 make)
endif()
